# 网格交易计划计算器

版本：1.4.0
作者：Rong Zhu
日期：2024年8月4日

## 描述

网格交易计划计算器是一个用户友好的工具，具有图形界面，用于创建和可视化网格交易策略。用户可以输入总资金、初始价格、止损价格、网格数量和分配方式等参数，生成定制的网格交易计划。

## 功能特性

- 多种分配方式：等金额分配、等比例分配和线性加权
- 配置保存和加载
- 交易计划导出为CSV文件
- 日志记录，便于调试和审计

## 项目结构

### 目录及文件结构
grid-trading-plan-calculator/
├── src/
│   ├── init.py
│   ├── calculations.py
│   ├── config.py
│   ├── gui.py
│   ├── utils.py
│   └── api_interface.py
├── tests/
│   └── test_calculations.py
├── assets/
│   └── icons/
│       └── app_icon.ico
├── logs/
│   └── .gitkeep
├── scripts/
│   └── build_exe.py
├── grid_trading_app.py
├── config.ini
├── requirements.txt
├── LICENSE
├── README.md
├── README-zh-CN.md
└── .gitignore

### 主要文件说明：
- grid_trading_app.py： 应用的主入口文件。
- src/： 包含核心应用程序模块的目录。
- tests/： 包含单元测试的目录。
- assets/： 用于存放静态资源（例如图标）的目录。
- logs/： 用于存放日志文件的目录。
- scripts/： 用于存放实用脚本（例如构建脚本）的目录。
- config.ini： 存储用户默认设置的配置文件。
- requirements.txt： 列出 Python 软件包依赖关系的文件。
- LICENSE： 许可证文件。
- README.md： 项目的英文说明文档。
- README-zh-CN.md： 项目的中文说明文档。

## 构建说明

要构建独立的可执行文件，请按以下步骤操作：

1. 确保您的系统已安装Python 3.7或更高版本。
2. 打开命令提示符，导航到项目根目录。
3. 运行以下命令：
```
python scripts/build_exe.py
```
4. 构建完成后，可执行文件将位于 `dist` 目录中。


## 安装

### Windows用户

1. 前往[发布页面](https://github.com/znhskzj/grid-trading-plan-calculator/releases)。
2. 下载最新的`.exe`文件。
3. 双击下载的文件即可运行应用程序。

### 开发者

如果您想从源代码运行脚本或为项目做出贡献：

1. 确保已安装 Python 3.7 或更高版本。
2. 克隆仓库：
git clone https://github.com/znhskzj/grid-trading-plan-calculator.git
3. 进入项目目录：
cd grid-trading-plan-calculator
4. 创建虚拟环境：
python -m venv venv
5. 激活虚拟环境：
- Windows: `venv\Scripts\activate`
- macOS 和 Linux: `source venv/bin/activate`
6. 安装所需包：
pip install -r requirements.txt
7. 运行脚本：
python grid_trading_plan.py

## 使用方法

1. 启动应用程序。
2. 输入您的交易参数。
3. 点击"计算"生成网格交易计划。
4. 如需导出结果，使用"保存为CSV"功能。

## 许可证

本项目采用 MIT 许可证。详情请见 [LICENSE](LICENSE) 文件。

## 贡献

欢迎贡献！请随时提交 Pull Request。

## 支持

如果您遇到任何问题，请提交 issue 并附上详细描述。

## 修订记录

### 版本 1.3.5 (2024年8月3日)
- 对代码进行了重大重构，提高了模块化程度和可维护性
- 将GUI、计算逻辑和配置管理分离为独立的模块
- 增强了整个应用程序的错误处理和日志记录
- 改进了类型提示，提高了代码可读性和IDE支持
- 为未来的API集成准备了结构
- 更新了构建过程以适应新的模块化结构

### 版本 1.3.4 (2024年8月2日)
- 代码结构优化：重新组织了函数的顺序，使代码结构更加清晰和合理。
- 遵循 PEP 8 规范：调整了代码格式，使其符合 Python 的 PEP 8 编码规范。
- 日志系统改进：用 logging 模块替换了大部分 print 语句，便于控制日志输出级别和格式。
- 错误处理增强：添加了更多的异常处理和用户友好的错误提示。
- 性能优化：对计算过程进行了优化，增加了超时处理机制。
- 代码可读性提升：添加了更多的注释，使代码更易于理解和维护。
- 配置管理改进：优化了配置的加载和保存过程。
- GUI 交互优化：改进了按钮状态管理，提高了用户交互体验。
- 优化等比例分配算法以实现更明显的指数增长。

### 版本 1.3.3 (2024年8月1日)
- 增强了计算过程的稳定性
- 改进了超时处理机制
- 优化了计算线程的状态管理
- 添加了更详细的日志记录，以便更好地进行故障排除
- 修复了计算有时在完成后仍错误报告为超时的问题
- 解决了计算后 GUI 无法正确更新的问题
- 纠正了计算期间和计算后按钮的行为

### 版本 1.3.2 (2024年8月1日)
- 修复了等金额分配方法中可能导致无限循环的严重bug
- 优化了所有分配方法的计算逻辑，以确保更准确的结果
- 移除了更改分配方法时的自动重新计算，以防止意外更新
- 增强了错误处理和日志记录，以便更好地调试和提升用户体验
- 简化了GUI中的分配方法描述，使其更加清晰
- 在结果显示中保留了分配方法的详细解释
- 在整个计算过程中添加了更全面的日志记录

### 版本 1.3.1 (2024年7月31日)
- 改进了等金额分配算法，使资金在各价格点上分布更均匀
- 增强了指数和线性加权分配的描述，以更好地区分它们
- 添加了每个网格的实际购买金额显示，以提高数据准确性
- 细化了不同分配方法的特征和效果解释
- 修复了一些小bug并改进了性能

### 版本 1.3.0 (2024年7月31日)
- 改进了输入验证和错误处理
- 添加了实时输入验证
- 实现了"重置为默认值"按钮
- 使用StringVar以更好地管理输入
- 通过更多信息丰富的错误消息增强了用户体验

### 版本 1.2.0 (2024年7月31日)
- 增加了保留资金功能，新增"保留10%计算"和"保留20%计算"按钮
- 优化了计算结果显示，增加了平均购买价格、最大潜在亏损等信息
- 改进了CSV导出功能，解决了中文乱码问题，并确保所有重要信息都被保存
- 修复了多个bug，提高了程序的稳定性
- 优化了用户界面，改善了按钮布局


### 版本 1.1.0 (2024年7月30日)
- 优化了基于总资金和初始价格的可购买股数计算
- 改进了"等比例分配"方法，确保每个网格至少分配1股
- 增加了对数值输入的更多验证
- 为结果显示区域添加了垂直滚动条，以适应大量网格的情况
- 设置了输入字段的 Tab 顺序，提升用户体验

### 版本 1.0.0 (2024年7月26日)
- 初始发布
- 实现了基本的网格交易计划计算
- 使用 tkinter 添加了图形用户界面
- 实现了多种分配方法：等金额分配、等比例分配和线性加权
- 添加了配置保存和加载功能
- 实现了将交易计划导出为 CSV 文件的功能
- 添加了日志记录，便于调试和审计